<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Incident Room Puzzle (DevOps Brain Teaser) — SureWhyNot</title>
  <meta name="description" content="A replayable DevOps/NetOps deduction puzzle: diagnose a production incident by guessing the correct env | service | failure | region. Modes, hints, stats, and daily challenge." />
  <meta name="robots" content="index,follow,max-image-preview:large" />
  <link rel="canonical" href="https://surewhynot.app/puzzle" />

  <!-- Social -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Incident Room Puzzle — SureWhyNot" />
  <meta property="og:description" content="DevOps deduction puzzle: env | service | failure | region. Modes, hints, stats, daily challenge." />
  <meta property="og:url" content="https://surewhynot.app/puzzle" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Incident Room Puzzle — SureWhyNot" />
  <meta name="twitter:description" content="DevOps deduction puzzle: env | service | failure | region. Modes, hints, stats, daily challenge." />

  <!-- Light hardening that won't break your inline styles/scripts -->
  <meta name="referrer" content="no-referrer" />
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    base-uri 'self';
    form-action 'self';
    frame-ancestors 'none';
    object-src 'none';
    img-src 'self' data:;
    script-src 'self' 'unsafe-inline';
    style-src 'self' 'unsafe-inline';
    connect-src 'self';
    upgrade-insecure-requests
  " />

  <!-- Your site CSS -->
  <link rel="stylesheet" href="/assets/site.css">

  <!-- Structured data -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Incident Room Puzzle",
    "applicationCategory":"GameApplication",
    "operatingSystem":"Web",
    "url":"https://surewhynot.app/puzzle",
    "description":"Replayable DevOps/NetOps deduction puzzle: guess env | service | failure | region with Exact/Misplaced feedback, modes, hints, stats, and daily challenge."
  }
  </script>

  <style>
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    input, select{
      width:100%;
      border-radius:12px;
      border:1px solid rgba(23,36,59,.85);
      background: rgba(11,21,40,.45);
      color:var(--text);
      padding:12px;
      font-family:inherit;
      font-size:13px;
      outline:none;
    }
    button{
      appearance:none;
      border:1px solid rgba(23,36,59,.85);
      background: linear-gradient(to bottom, rgba(11,21,40,.85), rgba(11,21,40,.55));
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      font-family:inherit;
      cursor:pointer;
      font-size:13px;
      user-select:none;
    }
    button.primary{border-color: rgba(246,195,74,.55)}
    button:disabled{opacity:.55; cursor:not-allowed}
    .msg{margin-top:10px; color:var(--muted); font-size:13px; line-height:1.5}
    .msg.success{color:#5cff9d}
    .msg.fail{color:#ff6b6b}
    .msg.warn{color:var(--accent)}

    .grid2{display:grid; grid-template-columns:1.25fr .75fr; gap:18px; padding:22px 0 26px}
    @media (max-width: 900px){ .grid2{grid-template-columns:1fr} }

    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 620px){ .controls{grid-template-columns:1fr} }

    .pillline{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }
    .small{
      font-size:12.5px;
      color:var(--muted);
      line-height:1.45;
    }
    .krow{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid rgba(23,36,59,.85);
      background: rgba(11,21,40,.55);
      font-size:12.5px;
      color:var(--muted);
    }
    .tag b{color:var(--text)}
    .tag .dot{
      width:8px;height:8px;border-radius:999px;
      background:var(--accent);
      box-shadow:0 0 0 5px rgba(246,195,74,.08);
    }

    .attempts{
      margin-top:14px;
      border:1px solid rgba(23,36,59,.8);
      border-radius:12px;
      overflow:hidden;
    }
    .attempts header{
      position:static;
      border:0;
      background: rgba(11,21,40,.30);
      backdrop-filter:none;
    }
    .attempts .head{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:10px 12px;
      border-bottom:1px solid rgba(23,36,59,.65);
    }
    .attempts table{
      width:100%;
      border-collapse:collapse;
      font-size:12.5px;
      color:var(--muted);
      background: rgba(11,21,40,.18);
    }
    .attempts th, .attempts td{
      text-align:left;
      padding:9px 12px;
      border-bottom:1px solid rgba(23,36,59,.35);
      vertical-align:top;
    }
    .attempts th{color:var(--text); font-weight:800}
    .attempts tr:last-child td{border-bottom:0}
    .mono{font-family:inherit}
    .slot{
      display:inline-flex;
      gap:6px;
      flex-wrap:wrap;
      align-items:center;
    }
    .chip{
      padding:2px 8px;
      border-radius:999px;
      border:1px solid rgba(23,36,59,.8);
      background: rgba(11,21,40,.55);
      color:var(--text);
      font-size:12px;
      line-height:1.6;
    }
    .chip.exact{border-color: rgba(92,255,157,.55)}
    .chip.mis{border-color: rgba(246,195,74,.65)}
    .chip.none{border-color: rgba(255,107,107,.40); color:var(--muted)}

    .hintgrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (max-width: 620px){ .hintgrid{grid-template-columns:1fr} }
    .hintbox{
      border:1px solid rgba(23,36,59,.8);
      border-radius:12px;
      background: rgba(11,21,40,.20);
      padding:10px 12px;
      font-size:12.5px;
      color:var(--muted);
      line-height:1.45;
    }
    .hintbox b{color:var(--text)}
    .hintbox code{color:var(--accent)}
    .hidden{display:none !important}
  </style>

  <script>
  (async function loadPartials(){
    try{
      const header = await fetch('/partials/header.html', { credentials:'same-origin' });
      const footer = await fetch('/partials/footer.html', { credentials:'same-origin' });
      const h = await header.text();
      const f = await footer.text();
      const headerEl = document.getElementById('site-header');
      const footerEl = document.getElementById('site-footer');
      if(headerEl) headerEl.innerHTML = h;
      if(footerEl) footerEl.innerHTML = f;
    }catch(e){
      /* fail silently */
    }
  })();
  </script>
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7167291111213614"
     crossorigin="anonymous"></script> 
	 
</head>

<body>
  <div class="page">
    <div id="site-header"></div>

    <main>
      <div class="wrap">
        <section class="grid2">

          <div class="card">
            <div class="pad">
              <div class="h1">Incident Room: Production Outage</div>
              <div class="muted">
                Deduce the correct stack signature.
                <br>
                Format: <span class="kbd">env | service | failure | region</span>
                <br><br>
                Feedback:
                <br>- <span class="kbd">Exact</span> = correct token in correct slot
                <br>- <span class="kbd">Misplaced</span> = token exists but wrong slot
              </div>

              <div class="hr"></div>

              <div class="controls" aria-label="Game settings">
                <label class="small">
                  Mode
                  <select id="mode">
                    <option value="normal">Normal (balanced)</option>
                    <option value="hard">Hard (bigger token pools)</option>
                    <option value="sre">SRE (no token list + fewer hints)</option>
                  </select>
                </label>

                <label class="small">
                  Challenge
                  <select id="challenge">
                    <option value="random">Random (new every reset)</option>
                    <option value="daily">Daily (same for everyone today)</option>
                  </select>
                </label>
              </div>

              <div class="pillline" aria-label="Status">
                <span class="tag"><span class="dot"></span><b id="tries">0</b><span>tries</span></span>
                <span class="tag"><span class="dot"></span><b id="hintsLeft">2</b><span>hints left</span></span>
                <span class="tag"><span class="dot"></span><b id="streak">0</b><span>streak</span></span>
              </div>

              <div class="hr"></div>

              <input
                id="guess"
                placeholder="example: prod|auth|timeout|us-east-1"
                autocomplete="off"
                autocapitalize="off"
                spellcheck="false"
                inputmode="text"
              />

              <div class="row">
                <button class="primary" id="btnTry">Deploy Guess</button>
                <button id="btnHint">Use Hint</button>
                <button id="btnNew">Reset Incident</button>
              </div>

              <div class="msg warn" id="out" role="status" aria-live="polite"></div>

              <div class="hintgrid" id="hints"></div>

              <div class="attempts" aria-label="Attempt history">
                <div class="head">
                  <div class="small"><b class="mono">Attempts</b></div>
                  <div class="small" id="timer"></div>
                </div>
                <table>
                  <thead>
                    <tr>
                      <th style="width:64px">#</th>
                      <th>Guess</th>
                      <th style="width:150px">Result</th>
                    </tr>
                  </thead>
                  <tbody id="attemptBody">
                    <tr><td colspan="3" class="small">No attempts yet.</td></tr>
                  </tbody>
                </table>
              </div>

              <div class="hr"></div>

              <div class="small" id="how">
                Tip: separators can be <span class="kbd">|</span> or commas.
              </div>
            </div>
          </div>

          <div class="card">
            <div class="pad">
              <div class="h1">Game Stats</div>
              <div class="muted">Stored locally on your device.</div>

              <div class="hr"></div>

              <div class="krow" id="statsRow"></div>

              <div class="hr"></div>

              <div class="muted">
                Share format (copy manually):
                <br><span class="kbd">Incident Room — Mode: X — Solved in Y/Z</span>
              </div>

              <div class="hr"></div>

              <div class="h1">Ad slot placeholder</div>
              <div class="adslot">
                <b>[ AdSense Slot Here ]</b>
              </div>
            </div>
          </div>

        </section>
      </div>
    </main>

    <div id="site-footer"></div>
  </div>

<script>
(() => {
  "use strict";

  const el = (id) => document.getElementById(id);

  const guessEl = el("guess");
  const out = el("out");
  const hintsEl = el("hints");
  const attemptBody = el("attemptBody");

  const modeEl = el("mode");
  const challengeEl = el("challenge");

  const btnTry = el("btnTry");
  const btnHint = el("btnHint");
  const btnNew = el("btnNew");

  const triesEl = el("tries");
  const hintsLeftEl = el("hintsLeft");
  const streakEl = el("streak");
  const statsRow = el("statsRow");
  const timerEl = el("timer");

  const maxTries = 6;

  // ---------- deterministic RNG (daily + hardening: no Math.random reliance when seeded) ----------
  function xmur3(str){
    let h = 1779033703 ^ str.length;
    for (let i = 0; i < str.length; i++) {
      h = Math.imul(h ^ str.charCodeAt(i), 3432918353);
      h = (h << 13) | (h >>> 19);
    }
    return function() {
      h = Math.imul(h ^ (h >>> 16), 2246822507);
      h = Math.imul(h ^ (h >>> 13), 3266489909);
      h ^= h >>> 16;
      return h >>> 0;
    };
  }
  function mulberry32(a){
    return function(){
      let t = (a += 0x6D2B79F5);
      t = Math.imul(t ^ (t >>> 15), t | 1);
      t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
      return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
    };
  }
  function seededRand(seedStr){
    const seed = xmur3(seedStr)();
    return mulberry32(seed);
  }

  // ---------- pools ----------
  const POOLS = {
    normal: {
      envs:     ["prod","staging","dev","qa"],
      services: ["auth","api","worker","db","cache","ingest"],
      failures: ["timeout","memory","latency","dns","tls","throttle"],
      regions:  ["us-east-1","us-west-2","eu-central-1","ap-south-1","eu-west-1","sa-east-1"],
      hints: 2,
      showTokenList: true
    },
    hard: {
      envs:     ["prod","staging","dev","qa","perf","dr"],
      services: ["auth","api","worker","db","cache","ingest","search","billing","queue","edge"],
      failures: ["timeout","memory","latency","dns","tls","throttle","i/o","deploy","perm","clock-skew"],
      regions:  ["us-east-1","us-west-2","eu-central-1","ap-south-1","eu-west-1","sa-east-1","ap-northeast-1","ca-central-1","me-south-1","af-south-1"],
      hints: 2,
      showTokenList: true
    },
    sre: {
      envs:     ["prod","staging","dev","qa","perf","dr"],
      services: ["auth","api","worker","db","cache","ingest","search","billing","queue","edge"],
      failures: ["timeout","memory","latency","dns","tls","throttle","i/o","deploy","perm","clock-skew"],
      regions:  ["us-east-1","us-west-2","eu-central-1","ap-south-1","eu-west-1","sa-east-1","ap-northeast-1","ca-central-1","me-south-1","af-south-1"],
      hints: 1,
      showTokenList: false
    }
  };

  // ---------- state ----------
  let secret = [];
  let tries = 0;
  let hintsLeft = 2;
  let startedAt = 0;
  let timerTick = 0;
  let rng = Math.random;

  const STORAGE_KEY = "swy_incident_room_stats_v1";

  const state = {
    mode: "normal",
    challenge: "random",
    solvedToday: false
  };

  const stats = {
    games: 0,
    wins: 0,
    streak: 0,
    bestTries: null,
    bestTimeSec: null
  };

  // ---------- helpers ----------
  function nowSec(){ return Math.floor(Date.now()/1000); }

  function safeText(node, text){
    node.textContent = String(text);
  }

  function setMsg(text, cls){
    safeText(out, text);
    out.className = "msg " + (cls || "warn");
  }

  function pick(arr){
    return arr[Math.floor(rng() * arr.length)];
  }

  function getTodayUTC(){
    const d = new Date();
    const y = d.getUTCFullYear();
    const m = String(d.getUTCMonth()+1).padStart(2,"0");
    const day = String(d.getUTCDate()).padStart(2,"0");
    return `${y}-${m}-${day}`;
  }

  function normalizeGuess(raw){
    const s = String(raw || "").trim().toLowerCase();
    const parts = s.includes("|") ? s.split("|") : s.split(",");
    return parts.map(x => x.trim()).filter(Boolean);
  }

  function validate(parts, pools){
    if(parts.length !== 4) return "Invalid format.";
    if(!pools.envs.includes(parts[0])) return "Invalid env token.";
    if(!pools.services.includes(parts[1])) return "Invalid service token.";
    if(!pools.failures.includes(parts[2])) return "Invalid failure token.";
    if(!pools.regions.includes(parts[3])) return "Invalid region token.";
    return "";
  }

  function isSolved(parts){
    for(let i=0;i<4;i++){
      if(parts[i] !== secret[i]) return false;
    }
    return true;
  }

  function score(guessArr){
    let exact = 0;
    let misplaced = 0;
    const usedSecret = [false,false,false,false];
    const usedGuess  = [false,false,false,false];

    for(let i=0;i<4;i++){
      if(guessArr[i] === secret[i]){
        exact++;
        usedSecret[i] = true;
        usedGuess[i] = true;
      }
    }
    for(let i=0;i<4;i++){
      if(usedGuess[i]) continue;
      for(let j=0;j<4;j++){
        if(usedSecret[j]) continue;
        if(guessArr[i] === secret[j]){
          misplaced++;
          usedSecret[j] = true;
          break;
        }
      }
    }
    return { exact, misplaced };
  }

  function slotChips(guessParts){
    // chip per slot: exact / misplaced / none (based on whether token exists anywhere)
    const chips = [];
    for(let i=0;i<4;i++){
      const token = guessParts[i];
      if(token === secret[i]){
        chips.push({ t: token, c: "exact" });
      }else if(secret.includes(token)){
        chips.push({ t: token, c: "mis" });
      }else{
        chips.push({ t: token, c: "none" });
      }
    }
    return chips;
  }

  function clearAttempts(){
    attemptBody.innerHTML = `<tr><td colspan="3" class="small">No attempts yet.</td></tr>`;
  }

  function addAttemptRow(n, guessParts, exact, misplaced){
    if(n === 1){
      attemptBody.innerHTML = "";
    }

    const tr = document.createElement("tr");

    const tdN = document.createElement("td");
    tdN.className = "mono";
    tdN.textContent = String(n);

    const tdGuess = document.createElement("td");
    const slot = document.createElement("div");
    slot.className = "slot";

    const chips = slotChips(guessParts);
    for(const ch of chips){
      const span = document.createElement("span");
      span.className = "chip " + ch.c;
      span.textContent = ch.t;
      slot.appendChild(span);
    }
    tdGuess.appendChild(slot);

    const tdRes = document.createElement("td");
    tdRes.className = "mono";
    tdRes.textContent = `Exact ${exact} / Misplaced ${misplaced}`;

    tr.appendChild(tdN);
    tr.appendChild(tdGuess);
    tr.appendChild(tdRes);

    attemptBody.appendChild(tr);
  }

  function renderHints(pools){
    // token list is optional per mode
    const show = POOLS[state.mode].showTokenList;

    hintsEl.classList.toggle("hidden", !show);
    if(!show){
      hintsEl.innerHTML = "";
      return;
    }

    const mk = (label, arr) => {
      const box = document.createElement("div");
      box.className = "hintbox";
      const b = document.createElement("b");
      b.textContent = label;
      box.appendChild(b);
      box.appendChild(document.createElement("br"));
      const line = document.createElement("div");
      for(const x of arr){
        const code = document.createElement("code");
        code.textContent = x;
        line.appendChild(code);
        line.appendChild(document.createTextNode("  "));
      }
      box.appendChild(line);
      return box;
    };

    hintsEl.innerHTML = "";
    hintsEl.appendChild(mk("env", pools.envs));
    hintsEl.appendChild(mk("service", pools.services));
    hintsEl.appendChild(mk("failure", pools.failures));
    hintsEl.appendChild(mk("region", pools.regions));
  }

  function startTimer(){
    startedAt = nowSec();
    if(timerTick) clearInterval(timerTick);
    timerTick = setInterval(() => {
      const t = Math.max(0, nowSec() - startedAt);
      safeText(timerEl, `Time: ${t}s`);
    }, 1000);
  }

  function stopTimer(){
    if(timerTick) clearInterval(timerTick);
    timerTick = 0;
  }

  function syncBadges(){
    safeText(triesEl, tries);
    safeText(hintsLeftEl, hintsLeft);
    safeText(streakEl, stats.streak);
    btnHint.disabled = (hintsLeft <= 0) || (tries <= 0) || (tries >= maxTries); // hint after at least 1 attempt
  }

  // ---------- stats ----------
  function loadStats(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return;
      const obj = JSON.parse(raw);
      if(!obj || typeof obj !== "object") return;
      for(const k of Object.keys(stats)){
        if(k in obj) stats[k] = obj[k];
      }
    }catch(e){}
  }

  function saveStats(){
    try{
      localStorage.setItem(STORAGE_KEY, JSON.stringify(stats));
    }catch(e){}
  }

  function renderStats(){
    statsRow.innerHTML = "";

    const mk = (label, value) => {
      const s = document.createElement("span");
      s.className = "tag";
      const d = document.createElement("span");
      d.className = "dot";
      const b = document.createElement("b");
      b.textContent = String(value);
      const t = document.createElement("span");
      t.textContent = label;
      s.appendChild(d);
      s.appendChild(b);
      s.appendChild(t);
      return s;
    };

    statsRow.appendChild(mk("games", stats.games));
    statsRow.appendChild(mk("wins", stats.wins));
    statsRow.appendChild(mk("streak", stats.streak));
    statsRow.appendChild(mk("best tries", stats.bestTries == null ? "—" : stats.bestTries));
    statsRow.appendChild(mk("best time", stats.bestTimeSec == null ? "—" : `${stats.bestTimeSec}s`));
  }

  // ---------- gameplay ----------
  function makeRng(){
    const today = getTodayUTC();
    const seed = (state.challenge === "daily")
      ? `incident-room|${today}|${state.mode}`
      : `incident-room|${Date.now()}|${state.mode}|${Math.random()}`;
    rng = (state.challenge === "daily") ? seededRand(seed) : Math.random;
  }

  function newPuzzle(){
    state.mode = modeEl.value;
    state.challenge = challengeEl.value;

    makeRng();

    const pools = POOLS[state.mode];

    secret = [
      pick(pools.envs),
      pick(pools.services),
      pick(pools.failures),
      pick(pools.regions)
    ];

    tries = 0;
    hintsLeft = pools.hints;

    clearAttempts();
    renderHints(pools);

    setMsg("Incident triggered. Diagnose.", "warn");
    guessEl.value = "";
    guessEl.focus();

    stopTimer();
    startTimer();
    safeText(timerEl, "Time: 0s");
    syncBadges();
  }

  function endGame(win){
    stopTimer();
    const timeSec = Math.max(0, nowSec() - startedAt);

    stats.games += 1;

    if(win){
      stats.wins += 1;
      stats.streak += 1;

      if(stats.bestTries == null || tries < stats.bestTries) stats.bestTries = tries;
      if(stats.bestTimeSec == null || timeSec < stats.bestTimeSec) stats.bestTimeSec = timeSec;

      setMsg(`Resolved in ${tries}/${maxTries} — ${timeSec}s. Stack stabilized.`, "success");
    }else{
      stats.streak = 0;
      setMsg(`Escalated. Root cause: ${secret.join(" | ")}`, "fail");
    }

    saveStats();
    renderStats();

    btnTry.disabled = true;
    btnHint.disabled = true;
  }

  function submit(){
    if(btnTry.disabled) return;

    const pools = POOLS[state.mode];
    const parts = normalizeGuess(guessEl.value);
    const err = validate(parts, pools);
    if(err){
      setMsg(err, "warn");
      return;
    }

    tries += 1;
    const { exact, misplaced } = score(parts);

    addAttemptRow(tries, parts, exact, misplaced);
    syncBadges();

    if(isSolved(parts)){
      endGame(true);
      return;
    }

    if(tries >= maxTries){
      endGame(false);
      return;
    }

    setMsg(`Attempt ${tries}/${maxTries} → Exact: ${exact} | Misplaced: ${misplaced}`, "warn");
    guessEl.focus();
    guessEl.select();
  }

  function useHint(){
    if(hintsLeft <= 0) return;
    if(btnTry.disabled) return;
    if(tries <= 0) return;

    hintsLeft -= 1;
    syncBadges();

    // Hint types (robust + fun):
    // 1) Reveal one correct slot (token + slot name)
    // 2) Eliminate two tokens from a random category (show tokens that are NOT in secret)
    const pools = POOLS[state.mode];

    const hintType = (rng() < 0.55) ? "reveal-slot" : "eliminate";

    if(hintType === "reveal-slot"){
      const slotNames = ["env","service","failure","region"];
      const i = Math.floor(rng() * 4);
      setMsg(`Hint: ${slotNames[i]} is "${secret[i]}"`, "warn");
      return;
    }

    // eliminate: choose a category, show 2 tokens that are not the secret token for that category
    const cats = [
      { name:"env", arr:pools.envs, idx:0 },
      { name:"service", arr:pools.services, idx:1 },
      { name:"failure", arr:pools.failures, idx:2 },
      { name:"region", arr:pools.regions, idx:3 }
    ];
    const cat = cats[Math.floor(rng() * cats.length)];
    const target = secret[cat.idx];

    const candidates = cat.arr.filter(x => x !== target);
    const a = candidates[Math.floor(rng() * candidates.length)];
    let b = candidates[Math.floor(rng() * candidates.length)];
    if(candidates.length > 1){
      while(b === a) b = candidates[Math.floor(rng() * candidates.length)];
    }
    setMsg(`Hint: ${cat.name} is NOT "${a}" or "${b}"`, "warn");
  }

  function onSettingsChange(){
    btnTry.disabled = false;
    btnHint.disabled = false;
    newPuzzle();
  }

  // ---------- wire up ----------
  btnTry.addEventListener("click", submit);
  btnHint.addEventListener("click", useHint);
  btnNew.addEventListener("click", () => {
    btnTry.disabled = false;
    btnHint.disabled = false;
    newPuzzle();
  });

  guessEl.addEventListener("keydown", (e) => {
    if(e.key === "Enter") submit();
  });

  modeEl.addEventListener("change", onSettingsChange);
  challengeEl.addEventListener("change", onSettingsChange);

  // ---------- init ----------
  loadStats();
  renderStats();

  newPuzzle();
})();
</script>
</body>
</html>
