<!doctype html>
<html>
  <body>
    <h3>WS Test</h3>
    <pre id="log"></pre>
    <script>
      const log = (x) => (document.getElementById("log").textContent += x + "\n");
      const ws = new WebSocket("ws://localhost:8787/ws?uuid=ced-test");

      ws.onopen = () => {
        log("WS: open");
        ws.send(JSON.stringify({ type: "heartbeat" }));
        ws.send(JSON.stringify({ type: "chat:send", message: "hello from websocket" }));
      };

      ws.onmessage = (e) => log("WS: " + e.data);
      ws.onerror = (e) => log("WS: error");
      ws.onclose = () => log("WS: close");
    </script>
  </body>
</html>
